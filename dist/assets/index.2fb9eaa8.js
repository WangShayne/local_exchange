var b=(u,p,n)=>new Promise((l,m)=>{var d=e=>{try{a(n.next(e))}catch(i){m(i)}},f=e=>{try{a(n.throw(e))}catch(i){m(i)}},a=e=>e.done?l(e.value):Promise.resolve(e.value).then(d,f);a((n=n.apply(u,p)).next())});import{B as D}from"./TableImg.vue_vue_type_style_index_0_lang.6b3e07b0.js";import{T as E}from"./BasicForm.b027cf63.js";import{u as H}from"./useTable.94672f7b.js";import{getBasicColumns as N}from"./accountsData.d4126057.js";import{bf as V,a as z,at as I,a1 as K,o as C,f as j,m as r,z as s,i as A,B as _,t as P,k as B,j as c,K as $}from"./index.b177970f.js";import{u as R}from"./index.ff0956d6.js";import w from"./accountsModel.efdaaa9a.js";import{d as q}from"./account.17fe5e66.js";import{u as G}from"./accounts.4c852506.js";/* empty css              */import"./useForm.a367b025.js";import"./index.317e9de6.js";/* empty css               *//* empty css                */import"./useWindowSizeFn.78349dcf.js";import"./useContentViewHeight.3d0ad737.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               */import"./RedoOutlined.877feae7.js";import"./FullscreenOutlined.a7d9ff84.js";/* empty css               */import"./index.74f17ea1.js";/* empty css               *//* empty css               */import"./index.d9850e70.js";import"./download.34a57644.js";import"./index.27a68898.js";import"./uniqBy.cea23472.js";function J(u="modal"){return V.get({url:"/states"},{errorMessageMode:u})}const L=_("\u65B0\u5EFA"),O=_("\u5220\u9664"),we=z({__name:"index",setup(u){const p=I(),n=G(),{createMessage:l}=$(),[m,{openModal:d}]=R(),f=()=>{d(!0,{updateMode:!1})},[a,{openModal:e}]=R();function i(){}const[S,{reload:k,getSelectRows:T}]=H({canResize:!0,title:"\u8D26\u6237\u7BA1\u7406",api:J,clickToRowSelect:!1,columns:N(),defSort:{field:"name",order:"ascend"},rowKey:"id",showTableSetting:!0,onChange:i,rowSelection:{type:"checkbox"},onColumnsChange:t=>{},actionColumn:{width:160,title:"Action",dataIndex:"action"}}),x=t=>{n.setActiveAccountId(t.id),p.push({path:"/actions/index"})},F=()=>b(this,null,function*(){const t=yield T();if(t.length===0){l.error("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u8D26\u6237");return}const M=t.map(o=>o.id);Promise.all(M.map(o=>q({id:o}))).then(()=>{l.success("\u5220\u9664\u6210\u529F"),k()})}),v=t=>{e(!0,{updateMode:!0,data:t})},h=()=>{k({page:1})};return(t,M)=>{const o=K("a-button");return C(),j("div",null,[r(c(D),{onRegister:c(S)},{bodyCell:s(({column:y,record:g})=>[y.key==="name"?(C(),A(o,{key:0,type:"link",onClick:Q=>x(g)},{default:s(()=>[_(P(g.name),1)]),_:2},1032,["onClick"])):B("",!0),y.key==="action"?(C(),A(c(E),{key:1,actions:[{label:"\u7F16\u8F91",icon:"clarity:note-edit-line",onClick:v.bind(null,g)}]},null,8,["actions"])):B("",!0)]),toolbar:s(()=>[r(o,{type:"primary",onClick:f},{default:s(()=>[L]),_:1}),r(o,{type:"waring",onClick:F},{default:s(()=>[O]),_:1})]),_:1},8,["onRegister"]),r(w,{onRegister:c(m),minHeight:100,onModelClose:h},null,8,["onRegister"]),r(w,{onRegister:c(a),minHeight:100,onModelClose:h},null,8,["onRegister"])])}}});export{we as default};
