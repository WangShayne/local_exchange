var A=(C,f,o)=>new Promise((u,_)=>{var v=s=>{try{e(o.next(s))}catch(t){_(t)}},i=s=>{try{e(o.throw(s))}catch(t){_(t)}},e=s=>s.done?u(s.value):Promise.resolve(s.value).then(v,i);e((o=o.apply(C,f)).next())});import{b as x,B as w}from"./index.ff0956d6.js";import{u as E,c as I,g as U}from"./account.17fe5e66.js";import{a as j,v as B,w as z,a1 as y,o as M,i as k,z as p,f as D,m as c,k as b,a2 as N,j as F,K as O,Q as P}from"./index.b177970f.js";import"./useWindowSizeFn.78349dcf.js";import"./FullscreenOutlined.a7d9ff84.js";const R={key:0,class:"empty-tips"},V=j({__name:"accountsModel",emits:["modelClose","register"],setup(C,{emit:f}){const o=B(!0),u=B(!1),{createMessage:_}=O(),{success:v}=_,i=r=>{let a="0123456789qwertyuioplkjhgfdsazxcvbnm",l="";for(let n=0;n<r;n++)l+=a.charAt(Math.ceil(Math.random()*1e8)%a.length);return l},e=z({id:"",name:"",apiKey:"",secretKey:""}),[s,{setModalProps:t,closeModal:g}]=x(r=>A(this,null,function*(){e.id="",e.name=i(6),e.apiKey=i(64),e.secretKey=i(64),o.value=!0;const{updateMode:a}=r;if(a){const{data:{id:l,name:n,apiKey:m}}=r,K=yield U(l);u.value=!0,e.id=l,e.name=n,e.apiKey=m,e.secretKey=K.secret_key}else u.value=!1;o.value=!1})),L=()=>{u.value?(t({confirmLoading:!0}),E(e).then(()=>{v("\u66F4\u65B0\u6210\u529F"),t({confirmLoading:!1}),f("modelClose"),g()}).catch(()=>{t({confirmLoading:!1})})):(t({confirmLoading:!0}),I(e).then(()=>{v("\u521B\u5EFA\u6210\u529F"),t({confirmLoading:!1}),f("modelClose"),g()}).catch(()=>{t({confirmLoading:!1})}))},h=()=>{g()};return(r,a)=>{const l=y("a-spin"),n=y("a-input"),m=y("a-form-item"),K=y("a-form");return M(),k(F(w),N(r.$attrs,{destroyOnClose:"",onRegister:F(s),title:"\u65B0\u5EFA\u8D26\u6237",onOk:L,onCancel:h}),{default:p(()=>[o.value?(M(),D("div",R,[c(l)])):b("",!0),o.value?b("",!0):(M(),k(K,{key:1,model:e,"label-col":{span:4},"wrapper-col":{span:14}},{default:p(()=>[c(m,{label:"\u522B\u540D"},{default:p(()=>[c(n,{value:e.name,"onUpdate:value":a[0]||(a[0]=d=>e.name=d)},null,8,["value"])]),_:1}),c(m,{label:"apiKey"},{default:p(()=>[c(n,{value:e.apiKey,"onUpdate:value":a[1]||(a[1]=d=>e.apiKey=d)},null,8,["value"])]),_:1}),c(m,{label:"secretKey"},{default:p(()=>[c(n,{value:e.secretKey,"onUpdate:value":a[2]||(a[2]=d=>e.secretKey=d)},null,8,["value"])]),_:1})]),_:1},8,["model"]))]),_:1},16,["onRegister"])}}});const J=P(V,[["__scopeId","data-v-a0c30b06"]]);export{J as default};
